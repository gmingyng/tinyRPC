# TinyRPC

一个轻量级的RPC框架，基于C++17实现，使用epoll和线程池处理并发请求。

## 项目结构

```
tinyRPC/
├── trpc/                    # 核心库代码
│   ├── server.hpp          # 服务器实现
│   ├── service.hpp         # 服务接口定义
│   └── client.hpp          # 客户端实现
├── example/                # 示例代码
│   ├── server.cpp         # 服务器示例
│   └── test_add.cpp       # 客户端示例
├── build/                  # 构建目录
│   ├── obj/               # 目标文件
│   └── bin/               # 可执行文件
└── Makefile               # 构建脚本
```

## 核心组件

### 1. Reactor模式
- 使用epoll实现事件驱动
- 支持边缘触发(ET)模式
- 非阻塞IO处理

### 2. 线程池
- 固定大小的线程池
- 任务队列管理
- 支持优雅关闭

### 3. 服务注册
- 基于智能指针的服务管理
- 支持动态服务注册
- 类型安全的服务调用

### 4. 序列化
- 使用JSON格式序列化
- 支持基本数据类型
- 错误处理和响应

## 编译说明

### 环境要求
- Linux操作系统
- g++ 7.0或更高版本
- nlohmann/json库

### 编译命令
```bash
# 编译所有目标
make all

# 只编译服务器
make server

# 只编译客户端
make client

# 清理编译文件
make clean
```

## 特性

- 高性能：使用epoll和线程池处理并发
- 易用性：简单的API接口
- 可扩展：支持自定义服务实现
- 类型安全：模板支持多种数据类型
- 错误处理：完善的异常处理机制

## 注意事项

1. 目前仅支持Linux环境
2. 需要安装nlohmann/json库
3. 默认使用8080端口
4. 服务注册后所有权转移给框架管理

## 未来计划

- [ ] 支持更多数据类型
- [ ] 添加服务发现机制
- [ ] 支持负载均衡
- [ ] 添加监控和统计功能
- [ ] 支持Windows平台 